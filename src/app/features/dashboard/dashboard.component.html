<!-- Dashboard Canvas -->
<div class="canvas">
  <div class="frame has-theme-toggle">

    <!-- Small theme toggle pinned under navbar (top-right) -->
    <div class="theme-toggle-floating">
      <input
        id="themeToggle"
        class="sr-only"
        type="checkbox"
        [checked]="theme === 'mint'"
        (change)="onToggleChange($event)"
        aria-label="Toggle theme between Mint and White" />
      <label for="themeToggle" class="switch sm" role="switch" [attr.aria-checked]="theme === 'mint'">
        <span class="track">
          <span class="label left">White</span>
          <span class="label right">Mint</span>
        </span>
        <span class="knob"></span>
      </label>
    </div>

    <!-- Page Title -->
    <div class="row header">
      <h1 class="title">HR Frontend</h1>
    </div>

    <!-- ğŸ‰ confetti backdrop just for fun -->
    <div class="confetti"></div>

    <!-- ===== Top Row: Welcome + 4 KPI tiles ===== -->
    <div class="hero-wrap">
      <!-- Welcome card -->
      <div class="welcome-card glassy">
        <div class="avatar-pill">
          <span class="emoji">ğŸ‘©â€ğŸ’¼</span>
        </div>
        <div class="welcome-copy">
          <h2 class="welcome-title">Welcome<br>back</h2>
          <div class="welcome-sub">Hereâ€™s whatâ€™s happening today</div>
        </div>
      </div>

      <!-- KPI cards -->
      <div class="stat-card glassy kpi kpi-emp">
        <div class="stat-num">{{ stats.employees.count }}</div>
        <div class="stat-label">Employees</div>
        <div class="chip chip-up" *ngIf="stats.employees.delta >= 0">
          <span class="icon">â¬†</span>{{ stats.employees.delta }}%
        </div>
        <div class="chip chip-down" *ngIf="stats.employees.delta < 0">
          <span class="icon">â¬‡</span>{{ stats.employees.delta | number:'1.0-0' }}%
        </div>
      </div>

      <div class="stat-card glassy kpi kpi-dept">
        <div class="stat-num">{{ stats.departments.count }}</div>
        <div class="stat-label">Departments</div>
        <div class="mini-line"></div>
      </div>

      <div class="stat-card glassy kpi kpi-comp">
        <div class="stat-num">{{ stats.companies.count }}</div>
        <div class="stat-label">Companies</div>
        <div class="chip chip-up" *ngIf="stats.companies.delta >= 0">
          <span class="icon">â¬†</span>{{ stats.companies.delta }}%
        </div>
        <div class="chip chip-down" *ngIf="stats.companies.delta < 0">
          <span class="icon">â¬‡</span>{{ stats.companies.delta | number:'1.0-0' }}%
        </div>
      </div>

      <div class="stat-card glassy kpi kpi-cand">
        <div class="stat-num">{{ stats.candidates.count }}</div>
        <div class="stat-label">Candidates</div>
        <div class="chip chip-up" *ngIf="stats.candidates.delta >= 0">
          <span class="icon">â¬†</span>{{ stats.candidates.delta }}%
        </div>
        <div class="chip chip-down" *ngIf="stats.candidates.delta < 0">
          <span class="icon">â¬‡</span>{{ stats.candidates.delta | number:'1.0-0' }}%
        </div>
      </div>
    </div>

    <!-- ===== Second Row: Recent Candidates (left) + Upcoming Interviews (right) ===== -->
    <div class="split-panels">
      <!-- Recent Candidates -->
      <section class="panel glassy">
        <div class="panel-head">
          <h3 class="panel-title">Recent Candidates</h3>
        </div>

        <div class="table compact">
          <div class="thead">
            <div>Candidate</div>
            <div>Status</div>
            <div class="ghost"></div>
          </div>

          <div class="tr" *ngFor="let c of recentCandidates; let i = index" [class.alt]="i % 2 === 1">
            <div class="strong">{{ c.name }}</div>
            <div>
              <span class="badge"
                    [ngClass]="{
                      'badge-applied':  c.status === 'Applied',
                      'badge-interview':c.status === 'Interview',
                      'badge-hired':    c.status === 'Hired',
                      'badge-rejected': c.status === 'Rejected'
                    }">
                {{ c.status }}
              </span>
            </div>
            <div class="ghost"></div>
          </div>
        </div>
      </section>

      <!-- Upcoming Interviews -->
      <aside class="panel glassy">
        <div class="panel-head">
          <h3 class="panel-title">Upcoming Interviews</h3>
          <button class="icon-btn" aria-label="menu"><span class="material-icons">menu</span></button>
        </div>

        <!-- Row 1 -->
        <div class="sub-card glassy-lite">
          <div class="sub-grid">
            <div class="muted">Marketing</div>
            <div class="muted">Interviews</div>
          </div>

          <div class="tr compact-row" *ngFor="let u of upcoming | slice:0:2">
            <div class="strong">{{ u.when | date:'MMMM d, y' }}</div>
            <div class="actions">
              <button class="btn mint" (click)="schedule(u)">Schedule</button>
              <button class="btn sky"  (click)="email(u)">Email</button>
            </div>
          </div>
        </div>

        <!-- Footer CTA -->
        <div class="sub-card glassy-lite">
          <div class="panel-title sm">Upcoming Interviews</div>
          <button class="btn mint wide" (click)="openSchedule()">Schedule</button>
        </div>
      </aside>
    </div>

    <!-- Floating Action Buttons -->
    <button class="fab plus" (click)="addNew()" aria-label="Add">+</button>

    <div class="fab hire">
      <div class="bubble">ğŸ‘¤</div>
      <button class="btn hire-btn" (click)="openHire()">Hire</button>
    </div>

  </div>
</div>
