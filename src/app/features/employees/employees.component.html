<div class="canvas">
  <div class="frame">
    <!-- Title -->
    <div class="page-head">
      <h1 class="title">Employees</h1>
    </div>

    <!-- Error -->
    <div *ngIf="error" class="panel glassy error-banner">
      {{ error }}
    </div>

    <!-- Toolbar -->
    <div class="toolbar glassy">
      <div class="input-wrap">
        <span class="icon">ğŸ”</span>
        <input
          class="field"
          type="text"
          placeholder="Search employees"
          [(ngModel)]="employeeFilter"
          (input)="applyFilter()" />
      </div>

      <button class="btn mint" type="button" (click)="openAdd()">
        <span class="plus">+</span>
        Add
      </button>
    </div>

    <!-- Loading -->
    <section class="panel glassy" *ngIf="loading">
      Loading employeesâ€¦
    </section>

    <!-- Table -->
    <section class="panel glassy" *ngIf="!loading">
      <div class="table emp">
        <div class="thead">
          <div class="th muted">ID</div>
          <div class="th muted">Name</div>
          <div class="th muted">Email</div>
          <div class="th muted">Hire Date</div>
          <div class="th muted">Role</div>
          <div class="th muted right">Actions</div>
          <div class="ghost"></div>
        </div>

        <div
          class="tr"
          *ngFor="let e of employeesView; let i = index; trackBy: trackById"
          [class.alt]="i % 2 === 1">
          <div class="td mono muted">{{ e.id }}</div>
          <div class="td strong">{{ e.name || 'â€”' }}</div>
          <div class="td">{{ e.email || 'â€”' }}</div>
          <div class="td mono muted">{{ e.hireDate ? (e.hireDate | date:'MM/dd/yyyy') : 'â€”' }}</div>
          <div class="td">{{ e.role || 'â€”' }}</div>

          <div class="td right">
            <button class="icon-pill primary" type="button" title="Edit" (click)="editEmployee(e)">âœï¸</button>
            <button class="icon-pill danger" type="button" title="Delete" (click)="deleteEmployee(e)">ğŸ—‘ï¸</button>
          </div>
          <div class="ghost"></div>
        </div>

        <div class="tr" *ngIf="employeesView.length === 0">
          <div class="td muted" style="grid-column:1 / -1;">No employees to display.</div>
        </div>
      </div>
    </section>

    <!-- Add Modal -->
    <div class="modal-backdrop" *ngIf="addOpen" (click)="closeAdd()"></div>
    <div class="modal glassy" *ngIf="addOpen" (click)="$event.stopPropagation()">
      <div class="modal-head">
        <h3 class="title" style="font-size:18px;">Add Employee</h3>
      </div>

      <form (ngSubmit)="saveNew()" #addForm="ngForm" class="modal-body">
        <div class="form-row">
          <label>Name</label>
          <input #nameInput class="field" type="text" name="name" required [(ngModel)]="newEmp.name" />
        </div>

        <div class="form-row">
          <label>Email</label>
          <input class="field" type="email" name="email" [(ngModel)]="newEmp.email" />
        </div>

        <div class="form-row">
          <label>Hire Date</label>
          <input class="field" type="date" name="hireDate" [(ngModel)]="newEmp.hireDate" />
        </div>

        <div class="form-row">
          <label>Role</label>
          <input class="field" type="text" name="role" [(ngModel)]="newEmp.role" />
        </div>

        <div class="modal-actions">
          <button type="button" class="btn icon-pill" (click)="closeAdd()">Cancel</button>
          <button type="submit" class="btn mint" [disabled]="addSaving || !addForm.form.valid">Create</button>
        </div>
      </form>
    </div>
  </div>
</div>
